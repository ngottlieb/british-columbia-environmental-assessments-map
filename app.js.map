{"version":3,"sources":["app/components/App.js","app/components/EAOMap.js","app/components/ProjectMarker.js","app/initialize.js"],"names":["App","props","React","Component","L","Icon","Default","imagePath","EAOMap","state","projects","latlng","lat","lng","zoom","loadData","self","fetch","then","response","json","j","setState","position","access_token","map","ProjectMarkers","items","id","display","ProjectMarker","lon","projectIcon","name","description","projectUrl","code","iconUrl","type","includes","icon","document","addEventListener","ReactDOM","render","getElementById"],"mappings":"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","file":"public/app.js","sourcesContent":["import React from 'react';\nimport EAOMap from './EAOMap';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div id='app'>\n        <EAOMap />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Map, Marker, Popup, TileLayer, GeoJSON } from 'react-leaflet';\nimport ProjectMarker from './ProjectMarker';\nimport L from 'leaflet';\n\nL.Icon.Default.imagePath =\n  '//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/';\n\nexport default class EAOMap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: [],\n      latlng: {\n        lat: 55.4085,\n        lng: -125.0257\n      },\n      zoom: 6\n    }\n    this.loadData();\n  }\n\n  loadData() {\n    const self = this;\n    fetch(\"https://cors-anywhere.herokuapp.com/https://projects.eao.gov.bc.ca/api/projects/published\")\n      .then(function(response) { return response.json(); })\n      .then(function(j) { \n        self.setState({ projects: j });\n      });\n  }\n\n  render() {\n    const position = this.state.latlng;\n    const zoom = this.state.zoom;\n    const access_token = 'pk.eyJ1IjoibmdvdHRsaWViIiwiYSI6ImNqOW9uNGRzYTVmNjgzM21xemt0ZHVxZHoifQ.A6Mc9XJp5q23xmPpqbTAcQ'\n    const map = (\n      <Map center={position} zoom={zoom}>\n        <TileLayer\n          url='https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}'\n          accessToken={access_token}\n          id=\"mapbox.outdoors\"\n          attribution=\"data <a href='https://projects.eao.gov.bc.ca/'>courtesy of the BC government</a>\"\n          minZoom={5}\n        />\n        <ProjectMarkers projects={this.state.projects} />\n      </Map>\n    );\n    return map;\n  }\n}\n\nconst ProjectMarkers = ({ projects }) => {\n  const items = projects.map((props) => (\n    <ProjectMarker key={props.id} {...props} />\n  ));\n\n  return <div style={{ display: 'none' }}>{items}</div>\n}\n","import { Marker, Popup } from 'react-leaflet';\nimport React from 'react';\nimport L from 'leaflet';\n\nexport default class ProjectMarker extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Marker position={[this.props.lat, this.props.lon]} icon={this.projectIcon()}>\n        <Popup>\n          <h3>{this.props.name}</h3>\n          <p>{this.props.description}</p>\n          <a target=\"_blank\" href={this.projectUrl()}>More Info</a>\n        </Popup>\n      </Marker>\n    );\n  }\n\n  projectUrl() {\n    return \"https://projects.eao.gov.bc.ca/p/\" + this.props.code + \"/detail\";\n  }\n\n  // icons courtesy of https://mapicons.mapsmarker.com/\n  projectIcon() {\n    var iconUrl;\n    switch(this.props.type) {\n      case 'Mines':\n        iconUrl = 'images/mine-icon.png';\n        break;\n      case 'Energy-Electricity':\n        if (this.props.name.includes(\"Hydro\")) {\n          iconUrl = 'images/dam-icon.png';\n        } else if (this.props.name.includes(\"Wind\")) {\n          iconUrl = 'images/wind-icon.png';\n        } else {\n          iconUrl = 'images/power-icon.png';\n        }\n        break;\n      case 'Transportation':\n        iconUrl = 'images/road-icon.png';\n        break;\n      case 'Energy-Petroleum & Natural Gas':\n        iconUrl = 'images/oil-icon.png';\n        break;\n      case 'Water Management':\n        iconUrl = 'images/water-management-icon.png';\n        break;\n      case 'Waste Disposal':\n        iconUrl = 'images/waste-icon.png';\n        break;\n      case 'Tourist Destination Resorts':\n        iconUrl = 'images/tourism-icon.png';\n        break;\n      case 'Industrial':\n        iconUrl = 'images/industry-icon.png';\n        break;\n      default:\n        iconUrl = 'images/marker-icon.png';\n        break;\n    }\n\n    var icon = L.icon({ iconUrl: iconUrl });\n    return(icon);\n  }\n}\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from 'components/App';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.getElementById('mapContainer'));\n});\n"]}