{"version":3,"sources":["app/components/App.js","app/components/EAOMap.js","app/components/FilterBox.js","app/components/ProjectMarker.js","app/initialize.js"],"names":["App","props","React","Component","L","Icon","Default","imagePath","EAOMap","state","projects","currProjects","latlng","lat","lng","zoom","applyFilter","bind","fetchData","self","fetch","then","response","json","j","setState","filteredProjects","filter","proj","type","newProjects","position","access_token","map","ProjectMarkers","items","id","display","FilterBox","start_date","end_date","decision","phase","handleInputChange","event","target","value","checked","name","newFilter","Object","assign","selectOptions","typeSelectOptions","opt","push","ProjectMarker","lon","projectIcon","description","projectUrl","code","iconUrl","includes","icon","document","addEventListener","ReactDOM","render","getElementById"],"mappings":"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","file":"public/app.js","sourcesContent":["import React from 'react';\nimport EAOMap from './EAOMap';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div id='app'>\n        <EAOMap />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Map, Marker, Popup, TileLayer, Pane } from 'react-leaflet';\nimport ProjectMarker from './ProjectMarker';\nimport L from 'leaflet';\nimport FilterBox from './FilterBox';\n\nL.Icon.Default.imagePath =\n  '//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/';\n\nexport default class EAOMap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: [],\n      currProjects: [],\n      latlng: {\n        lat: 55.4085,\n        lng: -125.0257\n      },\n      zoom: 6\n    }\n    this.applyFilter = this.applyFilter.bind(this);\n    this.fetchData();\n  }\n\n  fetchData() {\n    var self = this;\n    fetch(\"https://cors-anywhere.herokuapp.com/https://projects.eao.gov.bc.ca/api/projects/published\")\n      .then(function(response) { return response.json(); })\n      .then(function(j) { self.setState({ projects: j, currProjects: self.filteredProjects(j, {}) }) });\n  }\n\n  filteredProjects(projects, filter) {\n    return projects.filter(function(proj) {\n      // check each condition and return false if it doesn't meet the test\n      if (filter.type && filter.type !== proj.type) { return false; }\n      return true;\n    });\n  }\n\n  applyFilter(filter) {\n    const newProjects = this.filteredProjects(this.state.projects, filter);\n    this.setState({\n      currProjects: newProjects\n    });\n  }\n\n\n  render() {\n    const position = this.state.latlng;\n    const zoom = this.state.zoom;\n    const access_token = 'pk.eyJ1IjoibmdvdHRsaWViIiwiYSI6ImNqOW9uNGRzYTVmNjgzM21xemt0ZHVxZHoifQ.A6Mc9XJp5q23xmPpqbTAcQ'\n    const map = (\n      <Map center={position} zoom={zoom}>\n        <TileLayer\n          url='https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}'\n          accessToken={access_token}\n          id=\"mapbox.outdoors\"\n          attribution=\"data <a href='https://projects.eao.gov.bc.ca/'>courtesy of the BC government</a>\"\n          minZoom={5}\n        />\n        <ProjectMarkers projects={this.state.currProjects} />\n        <FilterBox\n          applyFilter={this.applyFilter}\n        />\n      </Map>\n    );\n    return map;\n  }\n}\n\nconst ProjectMarkers = ({ projects }) => {\n  const items = projects.map((props) => (\n    <ProjectMarker key={props.id} {...props} />\n  ));\n\n  return <div style={{ display: 'none' }}>{items}</div>\n}\n","import React from 'react';\nimport { MapControl } from 'react-leaflet';\n\nexport default class FilterBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filter: {\n        start_date: '',\n        end_date: '',\n        type: '',\n        decision: '',\n        phase: ''\n      }\n    }\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n\n    var newFilter = Object.assign({}, this.state.filter);\n    newFilter[name] = value;\n    this.props.applyFilter(newFilter);\n    this.setState({\n      filter: {\n        [name]: value\n      }\n    });\n  }\n\n  render() {\n    const selectOptions = []\n    for (let opt of typeSelectOptions) {\n      selectOptions.push(<option value={opt}>{opt}</option>);\n    }\n\n    return (\n      <div className='leaflet-control-container'>\n        <div className='filter-box leaflet-top leaflet-control leaflet-right'>\n          <h3>Filter Results</h3>\n          <form>\n            <label>Project Type: \n              <select name=\"type\" value={this.state.filter.type} onChange={this.handleInputChange}>\n                <option value=\"\">All</option>\n                {selectOptions}\n              </select>\n            </label>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst typeSelectOptions = ['Mines', 'Industrial', 'Energy-Electricity', 'Transportation', 'Energy-Petroleum & Natural Gas', 'Water Management', 'Waste Disposal', 'Tourist Desination Resorts'];\n","import { Marker, Popup } from 'react-leaflet';\nimport React from 'react';\nimport L from 'leaflet';\n\nexport default class ProjectMarker extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Marker position={[this.props.lat, this.props.lon]} icon={this.projectIcon()}>\n        <Popup>\n          <h3>{this.props.name}</h3>\n          <p>{this.props.description}</p>\n          <a target=\"_blank\" href={this.projectUrl()}>More Info</a>\n        </Popup>\n      </Marker>\n    );\n  }\n\n  projectUrl() {\n    return \"https://projects.eao.gov.bc.ca/p/\" + this.props.code + \"/detail\";\n  }\n\n  // icons courtesy of https://mapicons.mapsmarker.com/\n  projectIcon() {\n    var iconUrl;\n    switch(this.props.type) {\n      case 'Mines':\n        iconUrl = 'images/mine-icon.png';\n        break;\n      case 'Energy-Electricity':\n        if (this.props.name.includes(\"Hydro\")) {\n          iconUrl = 'images/dam-icon.png';\n        } else if (this.props.name.includes(\"Wind\")) {\n          iconUrl = 'images/wind-icon.png';\n        } else {\n          iconUrl = 'images/power-icon.png';\n        }\n        break;\n      case 'Transportation':\n        iconUrl = 'images/road-icon.png';\n        break;\n      case 'Energy-Petroleum & Natural Gas':\n        iconUrl = 'images/oil-icon.png';\n        break;\n      case 'Water Management':\n        iconUrl = 'images/water-management-icon.png';\n        break;\n      case 'Waste Disposal':\n        iconUrl = 'images/waste-icon.png';\n        break;\n      case 'Tourist Destination Resorts':\n        iconUrl = 'images/tourism-icon.png';\n        break;\n      case 'Industrial':\n        iconUrl = 'images/industry-icon.png';\n        break;\n      default:\n        iconUrl = 'images/marker-icon.png';\n        break;\n    }\n\n    var icon = L.icon({ iconUrl: iconUrl });\n    return(icon);\n  }\n}\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from 'components/App';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.getElementById('mapContainer'));\n});\n"]}