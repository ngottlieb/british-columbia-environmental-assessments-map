{"version":3,"sources":["app/components/App.js","app/components/EAOMap.js","app/components/FilterBox.js","app/components/ProjectMarker.js","app/initialize.js"],"names":["App","props","state","showModal","openModal","bind","closeModal","setState","React","Component","L","Icon","Default","imagePath","EAOMap","projects","currProjects","latlng","lat","lng","optionsForFilters","typeOptions","decisionOptions","phaseOptions","zoom","applyFilter","fetchData","self","fetch","then","response","json","j","processProjects","filteredProjects","includeNA","map","proj","decisionYear","decisionDate","year","years","p","filter","y","minYear","Math","min","apply","maxYear","max","type","decision","eacDecision","phase","currentPhase","name","startDate","endDate","newProjects","options","types","Set","decisions","length","phases","position","access_token","markers","isLoading","ProjectMarkers","items","id","display","FilterBox","defaultFilter","handleInputChange","handleDateSliderChange","resetFilter","event","target","value","checked","updateFilter","updates","newFilter","Object","assign","decisionDateInputs","currentStartYear","currentEndYear","float","optionsForFilter","attribute","opt","push","FilterSelect","onChange","label","ProjectMarker","lon","projectIcon","format","proponent","description","projectUrl","code","iconUrl","includes","icon","document","addEventListener","ReactDOM","render","getElementById"],"mappings":"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","file":"public/app.js","sourcesContent":["import React from 'react';\nimport EAOMap from './EAOMap';\nimport { Modal, Button } from 'react-bootstrap';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false\n    };\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  render() {\n    return (\n      <div id='app'>\n        <EAOMap openModal={this.openModal} />\n        <Modal show={this.state.showModal} onHide={this.closeModal}>\n          <Modal.Header closeButton>\n            <Modal.Title>What is this?</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <h4>What is the map showing?</h4>\n            <p>\n              In British Columbia, Canada, \"major projects\" have to go through an environmental assessment process governed by\n              the <a href=\"https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/environmental-assessments\">Environmental Assessment Office</a>.\n              This map shows all projects that either have been through or are going through the environmental assessment process since 1990.\n            </p>\n            <h4>How do I use it?</h4>\n            <p>\n              By default, and when you click \"Reset Filter,\" all projects are displayed on the map. You can narrow the filters using the select boxes and date sliders\n              on the right. You can find more information about what different \"phases\" and \"decision statuses\" actually\n              mean <a href=\"https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/environmental-assessments/the-environmental-assessment-process\">on the EAO website.</a>\n            </p>\n            <h4>Why would I use it?</h4>\n            <p>\n              Kind of an open question. It allows you to explore trends in development applications over the last three decades and compare different types of projects.\n              For example, looking at just mines, you can see that over the last three years, far more mines (twenty) have been approved than in years prior.\n              It can also help you find current and past projects in a particular area; I'd heard rumors about a ski resort in the Duffy Lake Provincial Park area, for example,\n              and it's easy to find the project on the map and click through for more details.\n            </p>\n            <h4>Some notes</h4>\n            <p>\n              These data are from a public source provided by the EAO\n              here: <a href=\"https://projects.eao.gov.bc.ca/\">https://projects.eao.gov.bc.ca/</a>.\n              If you go there, you'll see that they already have a visualization of projects on a map. I found their interface frustrating as it\n              doesn't allow you to actually filter on the map itself, just in the table below, nor does it provide any visual indication of what a given project is until you click on it,\n              so I built this enhanced interface instead.\n            </p>\n            <p>\n              The points provided for each project with the data are not necessarily representative of the full scope of the project. For example,\n              there are a handful of hydro projects including the \"Narrows Inlet Hydro\" west of the Tantalus Range that include multiple dams under one umbrella\n              and are only shown as a single point on the map. We're hoping to find another data source at some point that will allow us to extend beyond the single\n              point display per project, but for now, that's what the Epic API provides.\n            </p>\n            <p>\n              Icons courtesy <a href=\"https://mapicons.mapsmarker.com\">Map Icons Collection</a> under a Creative Commons license.\n            </p>\n            <h4>Suggestions?</h4>\n            <p>\n              This was created by <a href=\"http://www.nicholasgottlieb.com\">Nick Gottlieb</a>. If you have suggestions or feedback, or want to contribute to this project\n              or collaborate on something else, please reach out! This project is <a href=\"https://github.com/ngottlieb/british-columbia-environmental-assessments-map\">hosted on Github</a>.\n            </p>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button onClick={this.closeModal}>Close</Button>\n          </Modal.Footer>\n        </Modal>\n      </div>\n    );\n  }\n\n  openModal() {\n    this.setState({ showModal: true });\n  }\n\n  closeModal() {\n    this.setState({ showModal: false });\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Map, Marker, Popup, TileLayer, Pane } from 'react-leaflet';\nimport ProjectMarker from './ProjectMarker';\nimport L from 'leaflet';\nimport FilterBox from './FilterBox';\nimport moment from 'moment';\nimport Spinner from 'react-spinner';\n\nL.Icon.Default.imagePath =\n  '//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/';\n\nexport default class EAOMap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: [],\n      currProjects: [],\n      latlng: {\n        lat: 55.4085,\n        lng: -125.0257\n      },\n      optionsForFilters: {\n        typeOptions: [],\n        decisionOptions: [],\n        phaseOptions: []\n      },\n      zoom: 6\n    }\n    this.applyFilter = this.applyFilter.bind(this);\n    this.fetchData();\n  }\n\n  fetchData() {\n    var self = this;\n    fetch(\"https://cors-anywhere.herokuapp.com/https://projects.eao.gov.bc.ca/api/projects/published\")\n      .then(function(response) { return response.json(); })\n      .then(function(j) { self.setState({ projects: self.processProjects(j), currProjects: self.filteredProjects(j, { includeNA: true }) }) });\n  }\n\n  // get decisionYear for all projects\n  processProjects(projects) {\n    if (projects) {\n      // get options for the drop down filters\n      this.setState({\n        optionsForFilters: this.optionsForFilters(projects)\n      });\n\n      projects.map((proj) => {\n        proj.decisionYear = moment(proj.decisionDate).year();\n        return proj;\n      });\n\n      // get beginning and end years for the date sliders\n      const years = projects.map(function(p) { return p.decisionYear; }).filter(function(y) { return (y ? y > 0 : false); });;\n      this.setState({\n        minYear: Math.min.apply(Math, years),\n        maxYear: Math.max.apply(Math, years)\n      });\n    }\n    return projects;\n  }\n\n  filteredProjects(projects, filter) {\n    return projects.filter(function(proj) {\n      // check each condition and return false if it doesn't meet the test\n      if (filter.type && proj.type && filter.type !== proj.type) { return false; }\n      if (filter.decision && proj.eacDecision && filter.decision !== proj.eacDecision) { return false; }\n      if (filter.phase && proj.currentPhase.name && filter.phase !== proj.currentPhase.name) { return false; }\n\n      if (!filter.includeNA && !proj.decisionYear) {\n        return false;\n      }\n\n      if (filter.startDate && proj.decisionYear) {\n        if (filter.startDate > proj.decisionYear) {\n          return false;\n        }\n      }\n      if (filter.endDate && proj.decisionYear) {\n        if (filter.endDate < proj.decisionYear && proj.decisionYear) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n\n  applyFilter(filter) {\n    const newProjects = this.filteredProjects(this.state.projects, filter);\n    this.setState({\n      currProjects: newProjects\n    });\n  }\n\n  optionsForFilters(projects) {\n    var options = {};\n    // type options\n    const types = projects.map(function(p) { return p.type; });\n    options.typeOptions = new Set(types)\n\n    var decisions = projects.map(function(p) { return p.eacDecision; });\n    options.decisionOptions = new Set(decisions.filter(\n      function(p) { \n        if (p) {\n          return p.length > 0;\n        } else {\n          return false;\n        }}));\n    \n    var phases = projects.map(function(p) { return p.currentPhase.name; });\n    options.phaseOptions = new Set(phases);\n\n    return options;\n  }\n\n\n  render() {\n    const position = this.state.latlng;\n    const zoom = this.state.zoom;\n    const access_token = 'pk.eyJ1IjoibmdvdHRsaWViIiwiYSI6ImNqOW9uNGRzYTVmNjgzM21xemt0ZHVxZHoifQ.A6Mc9XJp5q23xmPpqbTAcQ'\n    const markers = (<ProjectMarkers projects={this.state.currProjects} />);\n    const isLoading = this.state.projects.length == 0;\n    const map = (\n      <div>\n        <Map center={position} zoom={zoom}>\n          <TileLayer\n            url='https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}'\n            accessToken={access_token}\n            id=\"mapbox.outdoors\"\n            attribution=\"data <a href='https://projects.eao.gov.bc.ca/'>courtesy of the BC government</a>\"\n            minZoom={5}\n          />\n          { isLoading ? (<Spinner />) : markers }\n        </Map>\n        <FilterBox\n          openModal={this.props.openModal}\n          optionsForFilters={this.state.optionsForFilters}\n          applyFilter={this.applyFilter}\n          minYear={this.state.minYear}\n          maxYear={this.state.maxYear}\n        />\n      </div>\n    );\n    return map;\n  }\n}\n\nconst ProjectMarkers = ({ projects }) => {\n  if (projects) {\n    const items = projects.map((props) => (\n      <ProjectMarker key={props.id} {...props} />\n    ));\n    return <div style={{ display: 'none' }}>{items}</div>;\n  }\n}\n","import React from 'react';\nimport { MapControl } from 'react-leaflet';\nimport { Well, Form, FormGroup, FormControl, Checkbox, ControlLabel, Button } from 'react-bootstrap';\nimport ReactSlider from 'react-slider';\n\nexport default class FilterBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filter: this.defaultFilter()\n    }\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleDateSliderChange = this.handleDateSliderChange.bind(this);\n    this.resetFilter = this.resetFilter.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n    this.updateFilter({ [name]: value });\n  }\n\n  defaultFilter() {\n    return {\n      startDate: this.props.minYear,\n      endDate: this.props.maxYear,\n      includeNA: true,\n      type: '',\n      decision: '',\n      phase: ''\n    };\n  }\n\n  resetFilter() {\n    const filter = this.defaultFilter();\n    this.setState({\n      filter: filter\n    });\n    this.props.applyFilter(filter);\n  }\n\n  updateFilter(updates) {\n    var newFilter = Object.assign({}, this.state.filter);\n    Object.assign(newFilter, updates);\n    this.setState({\n      filter: newFilter\n    });\n    this.props.applyFilter(newFilter);\n  }\n\n  handleDateSliderChange(value) {\n    this.updateFilter({\n      startDate: value[0],\n      endDate: value[1]\n    });\n  }\n\n  currentStartYear() {\n    return this.state.filter.startDate || this.props.minYear;\n  }\n  currentEndYear() {\n    return this.state.filter.endDate || this.props.maxYear;\n  }\n\n  render() {\n    var decisionDateInputs;\n    // only render the slider once we've established its bounds\n    if (this.props.minYear && this.props.maxYear) {\n      decisionDateInputs = (\n        <FormGroup controlId=\"decisionDate\">\n          <ControlLabel>Decision Date</ControlLabel>\n          <Checkbox\n            checked={this.state.filter.includeNA}\n            name=\"includeNA\"\n            onChange={this.handleInputChange}\n          >\n            Include Pending or Decision Date Not Available\n          </Checkbox>\n          <ReactSlider\n            min={this.props.minYear}\n            max={this.props.maxYear}\n            withBars\n            pearling\n            onChange={this.handleDateSliderChange}\n            value={[this.currentStartYear(), this.currentEndYear()]}\n          >\n            <div>{this.currentStartYear()}</div>\n            <div>{this.currentEndYear()}</div>\n          </ReactSlider>\n        </FormGroup>\n      );\n    }\n\n    return (\n      <Well className='filter-box leaflet-top leaflet-control leaflet-right'>\n        <Button\n          bsStyle=\"primary\"\n          bsSize=\"large\"\n          onClick={this.resetFilter}\n          style={ { float: 'left' } }\n        >\n          Reset Filter\n        </Button>\n        <h3>Filter Results</h3>\n        <Form>\n          <FilterSelect\n            attribute=\"type\"\n            value={this.state.filter.type}\n            onChange={this.handleInputChange}\n            label=\"Project Type\"\n            options={this.optionsForFilter(\"type\")}\n          />\n\n          <FilterSelect\n            attribute=\"decision\"\n            value={this.state.filter.decision}\n            onChange={this.handleInputChange}\n            label=\"Decision Status\"\n            options={this.optionsForFilter(\"decision\")}\n          />\n\n          <FilterSelect\n            attribute=\"phase\"\n            value={this.state.filter.phase}\n            onChange={this.handleInputChange}\n            label=\"Phase\"\n            options={this.optionsForFilter(\"phase\")}\n          />\n\n        { decisionDateInputs }\n\n        </Form>\n        <hr />\n        <Button\n          bsStyle=\"info\"\n          block\n          onClick={this.props.openModal}\n        >\n          HELP -- What is this map?\n        </Button>\n      </Well>\n    );\n  }\n\n  optionsForFilter(attribute) {\n    const options = [];\n    for (let opt of this.props.optionsForFilters[attribute + \"Options\"]) {\n      options.push(<option value={opt}>{opt}</option>);\n    }\n    return(options);\n  }\n\n}\n\nconst FilterSelect = ({ attribute, value, onChange, label, options }) => {\n  return (\n    <FormGroup controlId={attribute}>\n      <ControlLabel>{label}</ControlLabel>\n      <FormControl\n        componentClass=\"select\"\n        value={value}\n        onChange={onChange}\n        name={attribute}\n      >\n        <option value=\"\">All</option>\n        {options}\n      </FormControl>\n    </FormGroup>\n  );\n}\n\n","import { Marker, Popup } from 'react-leaflet';\nimport React from 'react';\nimport L from 'leaflet';\nimport moment from 'moment';\n\nexport default class ProjectMarker extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Marker position={[this.props.lat, this.props.lon]} icon={this.projectIcon()}>\n        <Popup>\n          <h3>{this.props.name}</h3>\n          <dl>\n            <dt>Type</dt>\n            <dd>{this.props.type}</dd>\n            <dt>Decision</dt>\n            <dd>{this.props.eacDecision ? this.props.eacDecision : 'N/A'}</dd>\n            <dt>Decision Date</dt>\n            <dd>{this.props.decisionDate ? moment(this.props.decisionDate).format('MMMM Do YYYY') : 'N/A'}</dd>\n            <dt>Proponent</dt>\n            <dd>{this.props.proponent ? this.props.proponent.name : ''}</dd>\n          </dl>\n          <p>{this.props.description}</p>\n          <a target=\"_blank\" href={this.projectUrl()}>More Info</a>\n        </Popup>\n      </Marker>\n    );\n  }\n\n  projectUrl() {\n    return \"https://projects.eao.gov.bc.ca/p/\" + this.props.code + \"/detail\";\n  }\n\n  // icons courtesy of https://mapicons.mapsmarker.com/\n  projectIcon() {\n    var iconUrl;\n    switch(this.props.type) {\n      case 'Mines':\n        iconUrl = 'images/mine-icon.png';\n        break;\n      case 'Energy-Electricity':\n        if (this.props.name.includes(\"Hydro\")) {\n          iconUrl = 'images/dam-icon.png';\n        } else if (this.props.name.includes(\"Wind\")) {\n          iconUrl = 'images/wind-icon.png';\n        } else {\n          iconUrl = 'images/power-icon.png';\n        }\n        break;\n      case 'Transportation':\n        iconUrl = 'images/road-icon.png';\n        break;\n      case 'Energy-Petroleum & Natural Gas':\n        iconUrl = 'images/oil-icon.png';\n        break;\n      case 'Water Management':\n        iconUrl = 'images/water-management-icon.png';\n        break;\n      case 'Waste Disposal':\n        iconUrl = 'images/waste-icon.png';\n        break;\n      case 'Tourist Destination Resorts':\n        iconUrl = 'images/tourism-icon.png';\n        break;\n      case 'Industrial':\n        iconUrl = 'images/industry-icon.png';\n        break;\n      default:\n        iconUrl = 'images/marker-icon.png';\n        break;\n    }\n\n    var icon = L.icon({ iconUrl: iconUrl });\n    return(icon);\n  }\n}\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from 'components/App';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.getElementById('container'));\n});\n"]}