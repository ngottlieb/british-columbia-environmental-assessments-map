!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},a={}.hasOwnProperty,o=/^\.\.?(\/|$)/,i=function(e,t){for(var n,r=[],a=(o.test(t)?e+"/"+t:t).split("/"),i=0,l=a.length;i<l;i++)n=a[i],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},l=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t){return function(n){var r=i(l(t),n);return e.require(r,t)}},u=function(e,t){var r=y&&y.createHot(e),a={id:e,exports:{},hot:r};return n[e]=a,t(a.exports,s(e),a),a.exports},c=function(e){return r[e]?c(r[e]):e},p=function(e,t){return c(i(l(e),t))},f=function(e,r){null==r&&(r="/");var o=c(e);if(a.call(n,o))return n[o].exports;if(a.call(t,o))return u(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};f.alias=function(e,t){r[t]=e};var d=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/,m=function(e){if(d.test(e)){var t=e.replace(d,"");a.call(r,t)&&r[t].replace(d,"")!==t+"/index"||(r[t]=e)}if(h.test(e)){var n=e.replace(h,"");a.call(r,n)||(r[n]=e)}};f.register=f.define=function(e,r){if(e&&"object"==typeof e)for(var o in e)a.call(e,o)&&f.register(o,e[o]);else t[e]=r,delete n[e],m(e)},f.list=function(){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e};var y=e._hmr&&new e._hmr(p,f,t,n);f._cache=n,f.hmr=y&&y.wrap,f.brunch=!0,e.require=f}}(),function(){var e;"undefined"==typeof window?this:window;require.register("components/App.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t("react"),u=r(s),c=t("./EAOMap"),p=r(c),f=t("react-bootstrap"),d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showModal:!1},n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n}return i(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{id:"app"},u["default"].createElement(p["default"],{openModal:this.openModal}),u["default"].createElement(f.Modal,{show:this.state.showModal,onHide:this.closeModal},u["default"].createElement(f.Modal.Header,{closeButton:!0},u["default"].createElement(f.Modal.Title,null,"What is this?")),u["default"].createElement(f.Modal.Body,null,u["default"].createElement("h4",null,"What is the map showing?"),u["default"].createElement("p",null,'In British Columbia, Canada, "major projects" have to go through an environmental assessment process governed by the ',u["default"].createElement("a",{href:"https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/environmental-assessments"},"Environmental Assessment Office"),". This map shows all projects that either have been through or are going through the environmental assessment process since 1990."),u["default"].createElement("h4",null,"How do I use it?"),u["default"].createElement("p",null,'By default, and when you click "Reset Filter," all projects are displayed on the map. You can narrow the filters using the select boxes and date sliders on the right. You can find more information about what different "phases" and "decision statuses" actually mean ',u["default"].createElement("a",{href:"https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/environmental-assessments/the-environmental-assessment-process"},"on the EAO website.")),u["default"].createElement("h4",null,"Why would I use it?"),u["default"].createElement("p",null,"Kind of an open question. It allows you to explore trends in development applications over the last three decades and compare different types of projects. For example, looking at just mines, you can see that over the last three years, far more mines (twenty) have been approved than in years prior. It can also help you find current and past projects in a particular area; I'd heard rumors about a ski resort in the Duffy Lake Provincial Park area, for example, and it's easy to find the project on the map and click through for more details."),u["default"].createElement("h4",null,"Some notes"),u["default"].createElement("p",null,"These data are from a public source provided by the EAO here: ",u["default"].createElement("a",{href:"https://projects.eao.gov.bc.ca/"},"https://projects.eao.gov.bc.ca/"),". If you go there, you'll see that they already have a visualization of projects on a map. I found their interface frustrating as it doesn't allow you to actually filter on the map itself, just in the table below, nor does it provide any visual indication of what a given project is until you click on it, so I built this enhanced interface instead."),u["default"].createElement("p",null,"The points provided for each project with the data are not necessarily representative of the full scope of the project. For example, there are a handful of hydro projects including the \"Narrows Inlet Hydro\" west of the Tantalus Range that include multiple dams under one umbrella and are only shown as a single point on the map. We're hoping to find another data source at some point that will allow us to extend beyond the single point display per project, but for now, that's what the Epic API provides."),u["default"].createElement("p",null,"Icons courtesy ",u["default"].createElement("a",{href:"https://mapicons.mapsmarker.com"},"Map Icons Collection")," under a Creative Commons license."),u["default"].createElement("h4",null,"Suggestions?"),u["default"].createElement("p",null,"This was created by ",u["default"].createElement("a",{href:"http://www.nicholasgottlieb.com"},"Nick Gottlieb"),". If you have suggestions or feedback, or want to contribute to this project or collaborate on something else, please reach out! This project is ",u["default"].createElement("a",{href:"https://github.com/ngottlieb/british-columbia-environmental-assessments-map"},"hosted on Github"),".")),u["default"].createElement(f.Modal.Footer,null,u["default"].createElement(f.Button,{onClick:this.closeModal},"Close"))))}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.setState({showModal:!1})}}]),t}(u["default"].Component);e["default"]=d}),require.register("components/EAOMap.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),c=r(u),p=(t("react-dom"),t("react-leaflet")),f=t("./ProjectMarker"),d=r(f),h=t("leaflet"),m=r(h),y=t("./FilterBox"),b=r(y),v=t("moment"),g=r(v),E=t("react-spinner"),w=r(E);m["default"].Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/";var j=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={projects:[],currProjects:[],latlng:{lat:55.4085,lng:-125.0257},optionsForFilters:{typeOptions:[],decisionOptions:[],phaseOptions:[]},zoom:6},n.applyFilter=n.applyFilter.bind(n),n.fetchData(),n}return i(t,e),s(t,[{key:"fetchData",value:function(){var e=this;fetch("https://cors-anywhere.herokuapp.com/https://projects.eao.gov.bc.ca/api/projects/published").then(function(e){return e.json()}).then(function(t){e.setState({projects:e.processProjects(t),currProjects:e.filteredProjects(t,{includeNA:!0})})})}},{key:"processProjects",value:function(e){if(e){this.setState({optionsForFilters:this.optionsForFilters(e)}),e.map(function(e){return e.decisionYear=(0,g["default"])(e.decisionDate).year(),e});var t=e.map(function(e){return e.decisionYear}).filter(function(e){return!!e&&e>0});this.setState({minYear:Math.min.apply(Math,t),maxYear:Math.max.apply(Math,t)})}return e}},{key:"filteredProjects",value:function(e,t){return e.filter(function(e){return(!t.type||!e.type||t.type===e.type)&&((!t.decision||!e.eacDecision||t.decision===e.eacDecision)&&((!t.phase||!e.currentPhase.name||t.phase===e.currentPhase.name)&&(!(!t.includeNA&&!e.decisionYear)&&(!(t.startDate&&e.decisionYear&&t.startDate>e.decisionYear)&&!(t.endDate&&e.decisionYear&&t.endDate<e.decisionYear&&e.decisionYear)))))})}},{key:"applyFilter",value:function(e){var t=this.filteredProjects(this.state.projects,e);this.setState({currProjects:t})}},{key:"optionsForFilters",value:function(e){var t={},n=e.map(function(e){return e.type});t.typeOptions=new Set(n);var r=e.map(function(e){return e.eacDecision});t.decisionOptions=new Set(r.filter(function(e){return!!e&&e.length>0}));var a=e.map(function(e){return e.currentPhase.name});return t.phaseOptions=new Set(a),t}},{key:"render",value:function(){var e=this.state.latlng,t=this.state.zoom,n="pk.eyJ1IjoibmdvdHRsaWViIiwiYSI6ImNqOW9uNGRzYTVmNjgzM21xemt0ZHVxZHoifQ.A6Mc9XJp5q23xmPpqbTAcQ",r=c["default"].createElement(_,{projects:this.state.currProjects}),a=0==this.state.projects.length,o=c["default"].createElement("div",null,c["default"].createElement(p.Map,{center:e,zoom:t},c["default"].createElement(p.TileLayer,{url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",accessToken:n,id:"mapbox.outdoors",attribution:"data <a href='https://projects.eao.gov.bc.ca/'>courtesy of the BC government</a>",minZoom:5}),a?c["default"].createElement(w["default"],null):r),c["default"].createElement(b["default"],{openModal:this.props.openModal,optionsForFilters:this.state.optionsForFilters,applyFilter:this.applyFilter,minYear:this.state.minYear,maxYear:this.state.maxYear}));return o}}]),t}(c["default"].Component);e["default"]=j;var _=function(e){var t=e.projects;if(t){var n=t.map(function(e){return c["default"].createElement(d["default"],l({key:e.id},e))});return c["default"].createElement("div",{style:{display:"none"}},n)}}}),require.register("components/FilterBox.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t("react"),c=r(u),p=(t("react-leaflet"),t("react-bootstrap")),f=t("react-slider"),d=r(f),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filter:n.defaultFilter()},n.handleInputChange=n.handleInputChange.bind(n),n.handleDateSliderChange=n.handleDateSliderChange.bind(n),n.resetFilter=n.resetFilter.bind(n),n}return l(t,e),s(t,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;this.updateFilter(a({},r,n))}},{key:"defaultFilter",value:function(){return{startDate:this.props.minYear,endDate:this.props.maxYear,includeNA:!0,type:"",decision:"",phase:""}}},{key:"resetFilter",value:function(){var e=this.defaultFilter();this.setState({filter:e}),this.props.applyFilter(e)}},{key:"updateFilter",value:function(e){var t=Object.assign({},this.state.filter);Object.assign(t,e),this.setState({filter:t}),this.props.applyFilter(t)}},{key:"handleDateSliderChange",value:function(e){this.updateFilter({startDate:e[0],endDate:e[1]})}},{key:"currentStartYear",value:function(){return this.state.filter.startDate||this.props.minYear}},{key:"currentEndYear",value:function(){return this.state.filter.endDate||this.props.maxYear}},{key:"render",value:function(){var e;return this.props.minYear&&this.props.maxYear&&(e=c["default"].createElement(p.FormGroup,{controlId:"decisionDate"},c["default"].createElement(p.ControlLabel,null,"Decision Date"),c["default"].createElement(p.Checkbox,{checked:this.state.filter.includeNA,name:"includeNA",onChange:this.handleInputChange},"Include Pending or Decision Date Not Available"),c["default"].createElement(d["default"],{min:this.props.minYear,max:this.props.maxYear,withBars:!0,pearling:!0,onChange:this.handleDateSliderChange,value:[this.currentStartYear(),this.currentEndYear()]},c["default"].createElement("div",null,this.currentStartYear()),c["default"].createElement("div",null,this.currentEndYear())))),c["default"].createElement(p.Well,{className:"filter-box leaflet-top leaflet-control leaflet-right"},c["default"].createElement(p.Button,{bsStyle:"primary",bsSize:"large",onClick:this.resetFilter,style:{"float":"left"}},"Reset Filter"),c["default"].createElement("h3",null,"Filter Results"),c["default"].createElement(p.Form,null,c["default"].createElement(m,{attribute:"type",value:this.state.filter.type,onChange:this.handleInputChange,label:"Project Type",options:this.optionsForFilter("type")}),c["default"].createElement(m,{attribute:"decision",value:this.state.filter.decision,onChange:this.handleInputChange,label:"Decision Status",options:this.optionsForFilter("decision")}),c["default"].createElement(m,{attribute:"phase",value:this.state.filter.phase,onChange:this.handleInputChange,label:"Phase",options:this.optionsForFilter("phase")}),e),c["default"].createElement("hr",null),c["default"].createElement(p.Button,{bsStyle:"info",block:!0,onClick:this.props.openModal},"HELP -- What is this map?"))}},{key:"optionsForFilter",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=this.props.optionsForFilters[e+"Options"][Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;t.push(c["default"].createElement("option",{key:l,value:l},l))}}catch(s){r=!0,a=s}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw a}}return t}}]),t}(c["default"].Component);e["default"]=h;var m=function(e){var t=e.attribute,n=e.value,r=e.onChange,a=e.label,o=e.options;return c["default"].createElement(p.FormGroup,{controlId:t},c["default"].createElement(p.ControlLabel,null,a),c["default"].createElement(p.FormControl,{componentClass:"select",value:n,onChange:r,name:t},c["default"].createElement("option",{value:""},"All"),o))}}),require.register("components/ProjectMarker.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t("react-leaflet"),u=t("react"),c=r(u),p=t("leaflet"),f=r(p),d=t("moment"),h=r(d),m=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){return c["default"].createElement(s.Marker,{position:[this.props.lat,this.props.lon],icon:this.projectIcon()},c["default"].createElement(s.Popup,null,c["default"].createElement("h3",null,this.props.name),c["default"].createElement("dl",null,c["default"].createElement("dt",null,"Type"),c["default"].createElement("dd",null,this.props.type),c["default"].createElement("dt",null,"Decision"),c["default"].createElement("dd",null,this.props.eacDecision?this.props.eacDecision:"N/A"),c["default"].createElement("dt",null,"Decision Date"),c["default"].createElement("dd",null,this.props.decisionDate?(0,h["default"])(this.props.decisionDate).format("MMMM Do YYYY"):"N/A"),c["default"].createElement("dt",null,"Proponent"),c["default"].createElement("dd",null,this.props.proponent?this.props.proponent.name:"")),c["default"].createElement("p",null,this.props.description),c["default"].createElement("a",{target:"_blank",href:this.projectUrl()},"More Info")))}},{key:"projectUrl",value:function(){return"https://projects.eao.gov.bc.ca/p/"+this.props.code+"/detail"}},{key:"projectIcon",value:function(){var e;switch(this.props.type){case"Mines":e="images/mine-icon.png";break;case"Energy-Electricity":e=this.props.name.includes("Hydro")?"images/dam-icon.png":this.props.name.includes("Wind")?"images/wind-icon.png":"images/power-icon.png";break;case"Transportation":e="images/road-icon.png";break;case"Energy-Petroleum & Natural Gas":e="images/oil-icon.png";break;case"Water Management":e="images/water-management-icon.png";break;case"Waste Disposal":e="images/waste-icon.png";break;case"Tourist Destination Resorts":e="images/tourism-icon.png";break;case"Industrial":e="images/industry-icon.png";break;default:e="images/marker-icon.png"}var t=f["default"].icon({iconUrl:e});return t}}]),t}(c["default"].Component);e["default"]=m}),require.register("initialize.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=t("react-dom"),o=r(a),i=t("react"),l=r(i),s=t("components/App"),u=r(s);document.addEventListener("DOMContentLoaded",function(){o["default"].render(l["default"].createElement(u["default"],null),document.getElementById("container"))})}),require.alias("buffer/index.js","buffer"),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");